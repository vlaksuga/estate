<div class="navStartContainer">
    <div class="userContainer" style="cursor: pointer;">
        <div class="profileView">
            <div class="thumb">
                <span class="thumb material-icons" style="background-color: var(--theme-color-prime);" c-bind="rolepkey:text:setUserThumb"></span>
            </div>
            <div class="infoContainer">
                <div class="info">
                    <span class="name" c-bind="username:text"></span>
                    <div class="detail" c-bind="rolepkey:text:formatRole"></div>
                </div>
                <div class="actions"></div>
            </div>
        </div>        
    </div>
    <div class="menuContainer">

        <div class="menuView" id="menu_overview" viewlink="home.html" auth="admin" style="display:none">
            <span class="material-icons thumb">dashboard</span>
            <span class="name">홈</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="home.html" auth="agency" style="display:none">
            <span class="material-icons thumb">dashboard</span>
            <span class="name">홈</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="home.html" auth="guest" style="display: none;">
            <span class="material-icons thumb">dashboard</span>
            <span class="name">홈</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="user.html" auth="root" style="display: none;">
            <span class="material-icons thumb">manage_accounts</span>
            <span class="name">계정 관리</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="realestate.html" auth="admin" style="display: none;">
            <span class="material-icons thumb">where_to_vote</span>
            <span class="name">공시 물건</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="possession.html" auth="admin" style="display: none;">
            <span class="material-icons thumb">real_estate_agent</span>
            <span class="name">소유권</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="owner.html" auth="admin"  style="display: none;">
            <span class="material-icons thumb">person</span>
            <span class="name">소유자</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="mortgagee.html" auth="admin"  style="display: none;">
            <span class="material-icons thumb">account_balance</span>
            <span class="name">저당권자</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="mortgage.html" auth="admin"  style="display: none;">
            <span class="material-icons thumb">paid</span>
            <span class="name">근저당권</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="mycontract.html" auth="agency"  style="display: none;">
            <span class="material-icons thumb">handshake</span>
            <span class="name">계약</span>
        </div>
        <div class="menuView" id="menu_overview" viewlink="contract.html" auth="admin"  style="display: none;">
            <span class="material-icons thumb">handshake</span>
            <span class="name">계약</span>
        </div>
        
        <div class="menuView" id="menu_overview" viewlink="searchcontract.html" auth="admin" style="display: none;">
            <span class="material-icons thumb">search</span>
            <span class="name">열람</span>
        </div>
        
    </div>
</div>
<div class="navEndContainer" onclick="toggleNav()">
    <span class="material-icons toggle">chevron_left</span>
</div>


<script>
    checkNavToken();    
    
    let auth = $('nav').attr('auth');    
    $(".menuView[auth='"+ auth +"']").show();
    $('[viewlink]').each(function(){
        $(this).on('click', function(){            
            location.href = $(this).attr('viewlink');
        });
    });

    let currentMenuId = $('nav').attr('currentmenu');  
    document.querySelector(".menuView[viewlink='"+ currentMenuId +"'][auth='" + auth + "']").classList.add('active');
    
    
    function editProfile() {
        showToast("준비중입니다.");
    }

    function checkNavToken() {
        const token = sessionStorage.getItem('nav');        
        if(token) {            
            $('.toggle').text('chevron_right');
            $('nav').addClass('shrink');
            try{onNavShrink()}catch{}
            return;                    
        }        
    }

    function toggleNav() {        
        if($('nav').hasClass('shrink')) {            
            sessionStorage.removeItem('nav');
            $('.toggle').text('chevron_left');
            $('nav').removeClass('shrink');            
            try{onNavExpand()}catch{}
            return;
        }
        sessionStorage.setItem('nav', "Y");
        $('.toggle').text('chevron_right');
        $('nav').addClass('shrink');                
        try{onNavShrink()}catch{}
    }

    function setUserThumb(v, d, e) {
        if(v == "-1") { return "settings" }
        if(v == "1") { return "storefront" }
        if(v == "2") { return "assignment_ind" }
        if(v == "3") { return "person" }
        return v;
    }    
    
    function setDetail(v, d, e) {
        if(v == "com") { return "ADMIN"}
        if(v == "tm") { return "TEAM"}
        if(v == "me") { return "WORKER"}
    }

</script>