<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/main.css">    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/api.js"></script>    
    <script src="/js/main.js"></script>
    <title>SEUM RMS</title>
</head>

<body>
    <div id="app" user="admin">
        <header loadsrc="../layout/header.html">
        </header>
        <main>
            <nav loadsrc="../layout/nav.html" currentmenu="possession.html" auth="admin"></nav>
            <article>
                <div class="contentHeader">
                    <div class="contentHeaderStartContainer">
                        <div class="title">소유권 상세</div>
                    </div>
                    <div class="contentHeaderEndContainer">                        
                    </div>
                </div>
                <div class="contentMain">
                    <div class="overflowContainer" style="max-height: calc(100vh - 130px); overflow-y: auto;">
                        <div class="cellView" style="width:75%">
                            <div class="cellCol">
                                <div class="cellRowTitle">대상 정보</div>
                                
                                <div class="cellRow">                                
                                    <div class="cell view">
                                        <span class="cellTitle">소재지</span>
                                        <span c-bind="estate.townname:text:formatAddress"></span>
                                    </div>
                                    <div class="cell view">
                                        <span class="cellTitle">지목</span>
                                        <span c-bind="estate.officialnomination:text"></span>
                                    </div>
                                    <div class="cell view buildingname" style="display: none;">
                                        <span class="cellTitle">건물명</span>
                                        <span c-bind="estate.officialbuildingname:text"></span>
                                    </div>
                                </div>
                                
                                <div class="cellRowTitle">소유자</div>
                                
                                <div class="cellRow">
                                    <div class="cellCol" style="width: 33%;">
                                        <div class="cellRow">
                                            <div class="cell ownerlist">
                                                <span class="cellTitle">이름</span>
                                                <span class="ownername" c-bind="owner.ownername:text"></span>
                                            </div>
                                        </div>
                                        <div class="cellRow">
                                            <div class="cell">
                                                <span class="cellTitle">주민등록번호</span>
                                                <span class="owneridnumber" c-bind="owner.owneridnumber:text"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cellCol">
                                        <div class="cellRow">
                                            <div class="cell">
                                                <span class="cellTitle">주소</span>
                                                <span class="owneraddress" c-bind="owner.owneraddress:text"></span>
                                            </div>
                                        </div>
                                        <div class="cellRow">
                                            <div class="cell">
                                                <span class="cellTitle">연락처1</span>
                                                <span class="ownerphone" c-bind="owner.ownerphone:text:formatTel"></span>
                                            </div>
                                            <div class="cell">
                                                <span class="cellTitle">연락처2</span>
                                                <span class="ownertel" c-bind="owner.ownertel:text:formatTel"></span>
                                            </div>
                                            <div class="cell">
                                                <span class="cellTitle">업종</span>
                                                <span class="ownersector" c-bind="owner.ownersector:text"></span>
                                            </div>
                                        </div>
                                    </div>                                                                
                                </div>
              
    
                                <div class="cellRowTitle">소유권 취득</div>
                                <div class="cellRow">
                                    <div class="cell">
                                        <span class="cellTitle">총면적 (&#13217)</span>
                                        <span class="officialmeter" c-bind="estate.officialmeter:text" id="officialmeter"></span>
                                    </div>
                                    <label class="cell" for="possessionlandmeter">
                                        <span class="cellTitle">소유지분 면적 (&#13217)</span>
                                        <span class="possessionmeter" c-bind="possessionmeter:text"></span>
                                    </label>
                                    <div class="cell">
                                        <span class="cellTitle">소유지분 면적 (평)</span>
                                        <span class="possessionmeterkor" c-bind="possessionmeter:text:formatMeterKor"></span>
                                    </div>
                                    <div class="cell" for="meterpercent">
                                        <span class="cellTitle">소유지분 비율</span>
                                        <span class="possessionmeterpercent" c-bind="possessionmeter:text:formatPossessionMeterPercent"></span>                                        
                                    </div>
                                </div>
                                <div class="cellRow">
                                    <label class="cell" >
                                        <span class="cellTitle">소유권취득일</span>
                                        <span class="possessiontransferdate" c-bind="possessiontransferdate:text:formatDateNum"></span>
                                    </label>
                                    <label class="cell" >
                                        <span class="cellTitle">소유권취득원인</span>
                                        <span class="possessioncause" c-bind="possessioncause:text"></span>                                        
                                    </label>
                                    <label class="cell" >
                                        <span class="cellTitle">종전자산</span>
                                        <span class="beforeprice" c-bind="beforeprice:text:formatWon"></span>                                        
                                    </label>
                                    <label class="cell" >
                                        <span class="cellTitle">종후자산</span>
                                        <span class="afterprice" c-bind="afterprice:text:formatWon"></span>                                        
                                    </label>
                                </div>


    
                                <div class="cellRowTitle">저당권</div>
                                <div class="wrap" c-bind="mortgagelist:list" style="display: flex; flex-direction: column; gap: 8px;">
                                    <item>
                                        <div class="cellRow">                                            
                                            <div class="cell view">
                                                <span class="cellTitle">저당권 설정일</span>
                                                <span class="mortgagedate" c-bind="mortgagedate:text:formatDateNum"></span>                                    
                                            </div>
                                            <div class="cell view">                                    
                                                <span class="cellTitle">저당권 설정 원인</span>
                                                <span class="mortgagecause" c-bind="mortgagecause:text"></span>
                                            </div>
                                            <div class="cell view">
                                                <span class="cellTitle">저당권 종류</span>
                                                <span class="mortgagekind" c-bind="mortgagekind:text:formatMortgageKind"></span>
                                            </div>
                                            <div class="cell view">
                                                <span class="cellTitle">저당권설정자</span>
                                                <span class="mortgageename" c-bind="mortgageename:text"></span>
                                            </div>
                                            <div class="cell view">
                                                <span class="cellTitle">채권자</span>
                                                <span class="debtor" c-bind="debtor:text"></span>
                                            </div>
            
                                            <div class="cell view">
                                                <span class="cellTitle">채권액(채권최고액)</span>
                                                <span class="mortgageprice" c-bind="mortgageprice:text:formatWon"></span>                                    
                                            </div>                                   
                                        </div>
                                    </item>
                                </div>
                                <div class="rowFlexContainer" style="justify-content: flex-end; gap :10px">
                                    <div class="buttonView" onclick="location.href='possession.html'">
                                        <span>뒤로</span>
                                    </div>
                                    <div class="buttonView" onclick="goModifyPossession()">
                                        <span>수정</span>
                                    </div>
                                </div>                                
                            </div>
                        </div>
                    </div>
                    
                </div>                 
            </article>
            <aside></aside>
        </main>
    </div>
</body>

</html>

<script>
    
    function runSetup() {
        findItems(document);        
        setOwnerDetail()
    }    
    function setOwnerDetail(){
        const config = { possessionpkey : getParam('possessionpkey') }
        API.getPossession(config).then(data => {                        
            currentData = data.body.possession;
            if(currentData.estate.officialkind == "LAND") { $('.buildingname').hide(); }
            if(currentData.estate.officialkind == "BUIL") { $('.buildingname').show(); }
            bindView($('.cellView').get(0), data.body.possession);
        })
    }

    function formatAddress(v, d, e) {
        return v + " " + d.estate.officialaddress + "지번 - " + formatOfficialKind(d.estate.officialkind);        
    }

    function getLandPriceGap (v, d, e) {
        return formatWon(parseInt(v) - parseInt(d.estate.officiallandprice));
    }

    function getBuildingPriceGap (v, d, e) {
        return formatNumber(parseInt(v) - parseInt(d.estate.officialbuildingprice));
    }

    function goModifyPossession() {
        location.href = "modifypossession.html?possessionpkey=" + currentData.possessionpkey;
    }

    

</script>